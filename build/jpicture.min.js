/* build with grunt jpicture 2015-12-09 */
!function(a,b){"use strict";var c={enableZoom:!0,orientationChange:!0,callback:function(){},animationSpeed:"fast",checkForHtml:!0,lastPicture:{height:0,width:0}},d=function(a,b){var c={},d=null;for(d in a)Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&(c[d]=b[d]);return c},e=function(){this.settings={},this.checkType=function(a,b){return Object.prototype.toString.call(a)==="[object "+b+"]"?!0:!1},this.findMatchingWidth=function(a,b){var c=1/0,d=0,e="";for(var f in a)a.hasOwnProperty(f)&&Math.abs(a[f]-b)<c&&(c=Math.abs(a[f]-b),d=a[f],e=f);return{width:d,key:e}},this.cacheWandH=function(a,b){settings.lastPicture.width=a,settings.lastPicture.height=b},this.calcResizingRatio=function(a,b,c){return c*(1+(b-a)/a)},this.getWidth=function(b){return parseInt(a.getComputedStyle(b,null).width)},this.getHeight=function(b){return parseInt(a.getComputedStyle(b,null).height)},this.fetchImg=function(b,c,d){var e=function(a,b){a.setAttribute("src",b),a.style.display="block",cacheWandH(this.getWidth(a),this.getHeight(a))},f=function(a,b){var c=new Image;c.onload=function(){var d=a.width();a.style.backgroundImage="url("+b+")",a.style.backgroundRepeat="no-repeat",a.style.backgroundSize="cover",a.style.display="block",a.style.height=calcResizingRatio(c.width,d,c.height),console.log("load"),cacheWandH(d,a.style.height)},c.src=b},g=new XMLHttpRequest;g.onreadystatechange=function(a){g.status>=200&&g.status<400&&("IMG"===b.getAttribute("tagName")?e(b,c.key):f(b,c.key),settings.callback(b))},g.onerror=function(){console.log("Error")},g.open("GET",a.location.href,!0),g.send()},this.onZoom=function(b,c){a.addEventListener("resize",function(){this.setPicture(b,c)})},this.onOrientationChange=function(b,c){a.addEventListener("orientationchange",function(){switch(a.orientation){case-90:case 90:this.setPicture($container,c);break;default:this.setPicture($container,c)}})},this.clearPicture=function(a){a.css({"background-image":"none",height:"auto"})},this.isSameWidth=function(a){return this.settings.lastPicture.width===a},this.hasWhiteSpace=function(a){return/\s/g.test(a)},this.hasLT=function(a){return-1!==a.indexOf("&lt;")},this.setPicture=function(a,b){var c=this.getWidth(a),d=this.findMatchingWidth(b,c);this.isSameWidth(c)||("hidden"===d.key?(a.style.display="none",this.cacheWandH(0,0)):(this.hasWhiteSpace(d.key)||this.hasLT(d.key))&&this.settings.checkForHtml?a.innerHTML=d.key:(this.fetchImg(a,d,c),a.innerHTML=""))},this.setResponsive=function(a,e){var f=b.getElementById(a);if(!e.hasOwnProperty("picList")){var g=e;e={picList:g}}this.settings=d(c,e),this.initParameters(a,this.settings.picList),this.setPicture(f,this.settings.picList)},this.initParameters=function(a,b){this.settings.enableZoom&&this.onZoom(a,b),this.settings.orientationChange&&this.onOrientationChange(a,b)}};a.jPicture=e}(window,document);