(function(f,l){f.fn.jp=function(n,q,r){return this.each(function(){var d={"background-repeat":"no-repeat","background-size":"cover",enableZoom:!0,orientationChange:!0},g={callback:null,animationSpeed:"fast",lastPicture:{height:0,width:0}},m=function(a,b){return Object.prototype.toString.call(a)==="[object "+b+"]"?!0:!1},p=function(a,b){f(a).fadeOut(g.animationSpeed,function(){b();f(a).fadeIn(g.animationSpeed)})},s=function(a,b,c){var e=function(a,b){p(a,function(){a.attr("src",b);var d=f(a).width(),
c=f(a).height();g.lastPicture.width=d;g.lastPicture.height=c})},h=function(a,b){var c=new Image;c.onload=function(){var e=f(a).width();d.backgroundImage="url("+b+")";d.height=c.height*(1+(e-c.width)/c.width);p(a,function(){a.css(d);var b=d.height;g.lastPicture.width=e;g.lastPicture.height=b})};c.src=b};f.ajax({url:l.location.href,cache:!0,processData:!1}).always(function(){"IMG"===a.tagName?e(f(a),b.key):h(f(a),b.key);g.callback&&g.callback(a)})},t=function(a,b){f(l).resize(function(){h(a,b)})},u=
function(a,b){switch(l.orientation){case -90:case 90:h(a,b);break;default:h(a,b)}},h=function(a,b){var c=f(a).width(),e;e=Infinity;var d=0,h="",k;for(k in b)b.hasOwnProperty(k)&&Math.abs(b[k]-c)<e&&(e=Math.abs(b[k]-c),d=b[k],h=k);e={width:d,key:h};g.lastPicture.width!==c&&s(a,e,c)};(function(a,b,c,e){m(c,"Function")&&(g.callback=c);m(c,"Object")&&(d=f.extend({},d,c),m(e,"Function")&&(g.callback=e));d.enableZoom&&t(a,b);d.orientationChange&&l.addEventListener("orientationchange",u(a,b));delete d.enableZoom;
delete d.orientationChange})(this,n,q,r);h(this,n);return this})}})(jQuery,window);
