(function(f,l){f.fn.jp=function(n,p,q){return this.each(function(){var e={"background-repeat":"no-repeat","background-size":"cover",display:"block",enableZoom:!0,orientationChange:!0},g={callback:null,animationSpeed:"fast",checkForHtml:!0,lastPicture:{height:0,width:0}},m=function(a,b){return Object.prototype.toString.call(a)==="[object "+b+"]"?!0:!1},r=function(a,b,c){var d=function(a,b){var d=new Image;d.onload=function(){var c=f(a).width();e.backgroundImage="url("+b+")";e.height=d.height*(1+(c-
d.width)/d.width);a.css(e);var h=e.height;g.lastPicture.width=c;g.lastPicture.height=h};d.src=b};f.ajax({url:l.location.href,cache:!0,processData:!1}).always(function(){if("IMG"===a.tagName){var c=f(a);c.attr("src",b.key);c.css("display","block");var e=f(c).width(),c=f(c).height();g.lastPicture.width=e;g.lastPicture.height=c}else d(f(a),b.key);g.callback&&g.callback(a)})},s=function(a,b){l.addEventListener("resize",function(){h(a,b)})},t=function(a,b){l.addEventListener("orientationchange",function(){switch(l.orientation){case -90:case 90:h(a,
b);break;default:h(a,b)}})},h=function(a,b){var c=f(a).width(),d;d=Infinity;var e=0,h="",k;for(k in b)b.hasOwnProperty(k)&&Math.abs(b[k]-c)<d&&(d=Math.abs(b[k]-c),e=b[k],h=k);d={width:e,key:h};g.lastPicture.width!==c&&("hidden"===d.key?(f(a).css("display","none"),g.lastPicture.width=0,g.lastPicture.height=0):(/\s/g.test(d.key)||-1===!d.key.indexOf("&lt;"))&&g.checkForHtml?(f(a).html(d.key),f(a).css({"background-image":"none",height:"auto"})):(r(a,d,c),f(a).html("")))};(function(a,b,c,d){m(c,"Function")&&
(g.callback=c);m(c,"Object")&&(e=f.extend({},e,c),m(d,"Function")&&(g.callback=d));e.enableZoom?s(a,b):h(this,b);e.orientationChange?t(a,b):h(this,b);delete e.enableZoom;delete e.orientationChange})(this,n,p,q);h(this,n);return this})}})(jQuery,window);
