/* build with grunt jpicture 2015-12-09 */
!function(a,b){"use strict";var c={enableZoom:!0,orientationChange:!0,callback:function(){},animationSpeed:"fast",checkForHtml:!0,lastPicture:{height:0,width:0}},d=function(a,b){var c={},d=null;for(d in a)Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&(c[d]=b[d]);return c},e=function(){this.settings={},this.checkType=function(a,b){return Object.prototype.toString.call(a)==="[object "+b+"]"?!0:!1},this.findMatchingWidth=function(a,b){var c=1/0,d=0,e="";for(var f in a)a.hasOwnProperty(f)&&Math.abs(a[f]-b)<c&&(c=Math.abs(a[f]-b),d=a[f],e=f);return{width:d,key:e}},this.cacheWandH=function(a,b){this.settings.lastPicture.width=a,this.settings.lastPicture.height=b},this.calcResizingRatio=function(a,b,c){return c*(1+(b-a)/a)},this.getWidth=function(b){return console.log(b),parseInt(a.getComputedStyle(b,null).width)},this.getHeight=function(b){return parseInt(a.getComputedStyle(b,null).height)},this.fetchImg=function(b,c,d){var e=this,f=function(a,b){a.setAttribute("src",b),a.style.display="block",cacheWandH(e.getWidth(a),e.getHeight(a))},g=function(a,b){var c=new Image;c.onload=function(){var d=e.getWidth(a);a.style.backgroundImage="url("+b+")",a.style.backgroundRepeat="no-repeat",a.style.backgroundSize="cover",a.style.display="block",a.style.height=e.calcResizingRatio(c.width,d,c.height),e.cacheWandH(d,a.style.height)},c.src=b},h=new XMLHttpRequest;h.onreadystatechange=function(a){"IMG"===b.getAttribute("tagName")?f(b,c.key):g(b,c.key),e.settings.callback(b)},h.onerror=function(){},h.open("GET",a.location.href,!0),h.send()},this.onZoom=function(b,c){var d=this;a.addEventListener("resize",function(){d.setPicture(b,c)})},this.onOrientationChange=function(b,c){var d=this;a.addEventListener("orientationchange",function(){switch(a.orientation){case-90:case 90:d.setPicture(b,c);break;default:d.setPicture(b,c)}})},this.clearPicture=function(a){a.style.backgroundImage="none",a.style.height="auto"},this.isSameWidth=function(a){return this.settings.lastPicture.width===a},this.hasWhiteSpace=function(a){return/\s/g.test(a)},this.hasLT=function(a){return-1!==a.indexOf("&lt;")},this.setPicture=function(a,b){var c=this.getWidth(a),d=this.findMatchingWidth(b,c);this.isSameWidth(c)||("hidden"===d.key?(a.style.display="none",this.cacheWandH(0,0)):(this.hasWhiteSpace(d.key)||this.hasLT(d.key))&&this.settings.checkForHtml?(a.innerHTML=d.key,this.clearPicture(a)):(this.fetchImg(a,d,c),a.innerHTML=""))},this.setResponsive=function(a,e){var f=b.getElementById(a);if(!e.hasOwnProperty("picList")){var g=e;e={picList:g}}this.settings=d(c,e),this.initParameters(a,this.settings.picList),this.setPicture(f,this.settings.picList)},this.initParameters=function(a,b){this.settings.enableZoom&&this.onZoom(a,b),this.settings.orientationChange&&this.onOrientationChange(a,b)}};a.jPicture=e}(window,document);