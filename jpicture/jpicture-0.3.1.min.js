(function(g,l){g.fn.jp=function(n,p,q){return this.each(function(){var d={"background-repeat":"no-repeat","background-size":"cover",display:"inline",enableZoom:!0,orientationChange:!0},h={callback:null,animationSpeed:"fast",lastPicture:{height:0,width:0}},m=function(b,a){return Object.prototype.toString.call(b)==="[object "+a+"]"?!0:!1},r=function(b,a,c){var e=function(a,b){var f=new Image;f.onload=function(){var e=g(a).width();d.backgroundImage="url("+b+")";d.height=f.height*(1+(e-f.width)/f.width);
a.css(d);var c=d.height;h.lastPicture.width=e;h.lastPicture.height=c};f.src=b};g.ajax({url:l.location.href,cache:!0,processData:!1}).always(function(){if("IMG"===b.tagName){var c=g(b);c.attr("src",a.key);c.css("display","inline");var d=g(c).width(),c=g(c).height();h.lastPicture.width=d;h.lastPicture.height=c}else e(g(b),a.key);h.callback&&h.callback(b)})},s=function(b,a){g(l).resize(function(){k(b,a)})},t=function(b,a){switch(l.orientation){case -90:case 90:k(b,a);break;default:k(b,a)}},k=function(b,
a){var c=g(b).width(),e;e=Infinity;var d=0,k="",f;for(f in a)a.hasOwnProperty(f)&&Math.abs(a[f]-c)<e&&(e=Math.abs(a[f]-c),d=a[f],k=f);e={width:d,key:k};h.lastPicture.width!==c&&("hidden"===e.key?g(b).css("display","none"):r(b,e,c))};(function(b,a,c,e){m(c,"Function")&&(h.callback=c);m(c,"Object")&&(d=g.extend({},d,c),m(e,"Function")&&(h.callback=e));d.enableZoom?s(b,a):k(this,a);d.orientationChange?l.addEventListener("orientationchange",t(b,a)):k(this,a);delete d.enableZoom;delete d.orientationChange})(this,
n,p,q);return this})}})(jQuery,window);
