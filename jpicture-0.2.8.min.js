!function(t,n){"use strict";t.fn.jp=function(e,a,i){return this.each(function(){var o={"background-repeat":"no-repeat","background-size":"cover",enableZoom:!0,orientationChange:!0},c={callback:null,animationSpeed:"fast",lastPicture:{height:0,width:0}},r=function(t,n){return Object.prototype.toString.call(t)==="[object "+n+"]"?!0:!1},u=function(t,n){var e=1/0,a=0,i="";for(var o in t)t.hasOwnProperty(o)&&Math.abs(t[o]-n)<e&&(e=Math.abs(t[o]-n),a=t[o],i=o);return{width:a,key:i}},h=function(t,n,e){return e*(1+(n-t)/t)},l=function(n,e){t(n).fadeOut(c.animationSpeed,function(){e(),t(n).fadeIn(c.animationSpeed)})},f=function(e,a){var i=function(n,e){l(n,function(){n.attr("src",e),u(t(n).width(),t(n).height())})},r=function(n,e){var a=new Image;a.onload=function(){var i=t(n).width();o.backgroundImage="url("+e+")",o.height=h(a.width,i,a.height),l(n,function(){n.css(o),u(i,o.height)})},a.src=e},u=function(t,n){c.lastPicture.width=t,c.lastPicture.height=n};t.ajax({url:n.location.href,cache:!0,processData:!1}).always(function(){"IMG"===e.tagName?i(t(e),a.key):r(t(e),a.key),c.callback&&c.callback(e)})},s=function(n,e){t(window).resize(function(){b(n,e)})},d=function(t,e){switch(n.orientation){case-90:case 90:b(t,e);break;default:b(t,e)}},b=function(n,e){var a=t(n).width(),i=u(e,a);c.lastPicture.width!==a&&f(n,i,a)},g=function(e,a,i,u){r(i,"Function")&&(c.callback=i),r(i,"Object")&&(o=t.extend({},o,i),r(u,"Function")&&(c.callback=u)),o.enableZoom&&s(e,a),o.orientationChange&&n.addEventListener("orientationchange",d(e,a)),delete o.enableZoom,delete o.orientationChange};return g(this,e,a,i),b(this,e),this})}}(jQuery,window);