/*! jpicture 2015-08-06 */
!function(a,b){"use strict";a.fn.jp=function(c,d,e){return this.each(function(){var f={"background-repeat":"no-repeat","background-size":"cover",display:"block",enableZoom:!0,orientationChange:!0},g={callback:null,animationSpeed:"fast",checkForHtml:!0,lastPicture:{height:0,width:0}},h=function(a,b){return Object.prototype.toString.call(a)==="[object "+b+"]"?!0:!1},i=function(a,b){var c=1/0,d=0,e="";for(var f in a)a.hasOwnProperty(f)&&Math.abs(a[f]-b)<c&&(c=Math.abs(a[f]-b),d=a[f],e=f);return{width:d,key:e}},j=function(a,b){g.lastPicture.width=a,g.lastPicture.height=b},k=function(a,b,c){return c*(1+(b-a)/a)},l=function(c,d,e){var h=function(b,c){b.attr("src",c),b.css("display","block"),j(a(b).width(),a(b).height())},i=function(b,c){var d=new Image;d.onload=function(){var e=a(b).width();f.backgroundImage="url("+c+")",f.height=k(d.width,e,d.height),b.css(f),j(e,f.height)},d.src=c};a.ajax({url:b.location.href,cache:!0,processData:!1}).always(function(){"IMG"===c.tagName?h(a(c),d.key):i(a(c),d.key),g.callback&&g.callback(c)})},m=function(a,c){b.addEventListener("resize",function(){s(a,c)})},n=function(a,c){b.addEventListener("orientationchange",function(){switch(b.orientation){case-90:case 90:s(a,c);break;default:s(a,c)}})},o=function(b){a(b).css({"background-image":"none",height:"auto"})},p=function(a){return g.lastPicture.width!==a},q=function(a){return/\s/g.test(a)},r=function(a){return-1!==a.indexOf("&lt;")},s=function(b,c){var d=a(b).width(),e=i(c,d);p(d)&&("hidden"===e.key?(a(b).css("display","none"),j(0,0)):(q(e.key)||r(e.key))&&g.checkForHtml?(a(b).html(e.key),o(b)):(l(b,e,d),a(b).html("")))},t=function(b,c,d,e){h(d,"Function")&&(g.callback=d),h(d,"Object")&&(f=a.extend({},f,d),h(e,"Function")&&(g.callback=e)),f.enableZoom?m(b,c):s(this,c),f.orientationChange?n(b,c):s(this,c),delete f.enableZoom,delete f.orientationChange};return t(this,c,d,e),s(this,c),this})}}(jQuery,window);